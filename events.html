<!DOCTYPE html>
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script type="text/javascript" src="EventBus.js"></script>
    </head>
    <body>
        <script type="text/javascript">

            
            document.addEventListener('DOMContentLoaded',function(){
                
                
                var button = document.querySelector('.not-blue');

                // Run function on `madeBlue` event
                button.addEventListener('madeBlue', function (e) {
                    console.log(e);
                    this.classList.add('color-changed');

                }, false);
                
                window.setTimeout(function(){

                    var makeBlue = function (element) {

                        element.classList.add('blue');

                        // Create a new event
                        var event = new CustomEvent('madeBlue' , {
                            'detail': element
                        });

                        // Dispatch the event
                        element.dispatchEvent(event);

                    };

                    makeBlue(button);

                },5000);

            });


            
            EventBus.Instance.timeout( () => {
                
                console.log('New Message!');

            });
            

        </script>
        
        <div>
            <button class="not-blue">Color Button</button>
        </div>
    </body>
</html>
